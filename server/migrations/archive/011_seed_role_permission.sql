-- Seed role_permission for revised model (run after 010_revised_schema.sql).
-- Stages: PSI, SAMPLE_DEVELOPMENT, PC_REVIEW, COSTING, SCF, SHIPMENT_TO_BRAND.
-- ADMIN/BRAND: read all; PBD/TD/FTY/MD/COSTING: read + write their stages per diagram.

INSERT INTO role_permission (role, stage, can_read, can_write, can_approve) VALUES
  ('ADMIN', 'PSI', true, true, true),
  ('ADMIN', 'SAMPLE_DEVELOPMENT', true, true, true),
  ('ADMIN', 'PC_REVIEW', true, true, true),
  ('ADMIN', 'COSTING', true, true, true),
  ('ADMIN', 'SCF', true, true, true),
  ('ADMIN', 'SHIPMENT_TO_BRAND', true, true, true),
  ('BRAND', 'PSI', true, false, false),
  ('BRAND', 'SAMPLE_DEVELOPMENT', true, false, false),
  ('BRAND', 'PC_REVIEW', true, false, false),
  ('BRAND', 'COSTING', true, false, false),
  ('BRAND', 'SCF', true, false, false),
  ('BRAND', 'SHIPMENT_TO_BRAND', true, false, false),
  ('PBD', 'PSI', true, true, false),
  ('PBD', 'SAMPLE_DEVELOPMENT', true, false, false),
  ('PBD', 'PC_REVIEW', true, false, false),
  ('PBD', 'COSTING', true, false, false),
  ('PBD', 'SCF', true, false, false),
  ('PBD', 'SHIPMENT_TO_BRAND', true, true, false),
  ('TD', 'PSI', true, false, false),
  ('TD', 'SAMPLE_DEVELOPMENT', true, true, false),
  ('TD', 'PC_REVIEW', true, false, false),
  ('TD', 'COSTING', true, false, false),
  ('TD', 'SCF', true, false, false),
  ('TD', 'SHIPMENT_TO_BRAND', true, false, false),
  ('FTY', 'PSI', true, false, false),
  ('FTY', 'SAMPLE_DEVELOPMENT', true, true, false),
  ('FTY', 'PC_REVIEW', true, false, false),
  ('FTY', 'COSTING', true, false, false),
  ('FTY', 'SCF', true, true, false),
  ('FTY', 'SHIPMENT_TO_BRAND', true, false, false),
  ('MD', 'PSI', true, false, false),
  ('MD', 'SAMPLE_DEVELOPMENT', true, false, false),
  ('MD', 'PC_REVIEW', true, true, false),
  ('MD', 'COSTING', true, false, false),
  ('MD', 'SCF', true, false, false),
  ('MD', 'SHIPMENT_TO_BRAND', true, false, false),
  ('COSTING', 'PSI', true, false, false),
  ('COSTING', 'SAMPLE_DEVELOPMENT', true, false, false),
  ('COSTING', 'PC_REVIEW', true, false, false),
  ('COSTING', 'COSTING', true, true, false),
  ('COSTING', 'SCF', true, false, false),
  ('COSTING', 'SHIPMENT_TO_BRAND', true, false, false)
ON CONFLICT (role, stage) DO UPDATE SET
  can_read = EXCLUDED.can_read,
  can_write = EXCLUDED.can_write,
  can_approve = EXCLUDED.can_approve,
  updated_at = now();
